"use strict";!function(e){function a(){e(window).width()>576&&e(".abs-box").each(function(a,i){e(i).find(".abs-box-bg").length||e(i).append('<div class="abs-box-bg"></div>'),e(i).hasClass("abs-box-right")?e(i).find(".abs-box-bg").css("right",-(e(window).width()-e(".container").outerWidth())/2):e(i).find(".abs-box-bg").css("left",-(e(window).width()-e(".container").outerWidth())/2)}),e(".image-full").each(function(a,i){e(i).find(".image-full-box").css("left",-(e(window).width()-e(".container").outerWidth())/2)})}e(".js-hero-slider").on("init",function(a,i,t,s){TweenMax.set("#main-header",{y:"-80px",opacity:0}),TweenMax.set(".hero .slick-dots",{y:"40px",opacity:0}),TweenMax.set(".hero .slick-count",{y:"40px",opacity:0}),e(".hero-slide:first-child .hero-slide-inner").children().each(function(e,a){TweenMax.set(a,{y:"80px",opacity:0})});var o=e(".hero").outerHeight(),n=e(".hero").attr("data-bgColorStart"),r=e(".hero").attr("data-bgColorEnd");e(".trans-layer").css({background:"linear-gradient(40deg, rgba("+n+",1) 0%, rgba("+r+",1) 100%)",opacity:1,"z-index":9999999,top:0}),e(".hero").css({opacity:0}),TweenMax.to(".trans-layer",1,{height:o,ease:Power3.easeIn}),TweenMax.to(".hero",.01,{opacity:1,delay:.99,onComplete:function(){TweenMax.to("#main-header",.5,{y:"0px",opacity:1,ease:Power1.easeOut}),TweenMax.to(".hero .slick-dots",.5,{y:"0px",opacity:1,ease:Power1.easeOut}),TweenMax.to(".hero .slick-count",.5,{y:"0px",opacity:1,ease:Power1.easeOut}),setTimeout(function(){e(".hero-slide:first-child .hero-slide-inner").children().each(function(e,a){e++,TweenMax.to(a,.4*e,{y:"0",opacity:1,ease:Power1.easeOut})})},400)}}),TweenMax.to(".trans-layer",1,{opacity:0,delay:1,onComplete:function(){TweenMax.set(".trans-layer",{height:0,zIndex:1})}})}),e(window).on("load",function(){if(a(),e("body").hasClass("home")||(TweenMax.set("#main-header",{y:"-80px",opacity:0}),TweenMax.to("#main-header",1,{y:"0px",opacity:1,ease:Power1.easeOut})),e(".fade-from-top").each(function(a,i){var t=e(this).attr("data-delay");t||(t=0),ScrollReveal().reveal(i,{easing:"ease-out",scale:1,distance:"40px",duration:500,viewFactor:.3,delay:t,afterReveal:function(e){e.classList.add("is-visible")}})}),e(".fade-from-top-children > *").each(function(e,a){ScrollReveal().reveal(a,{easing:"ease-out",scale:1,distance:"40px",duration:500,viewFactor:.3,delay:e,afterReveal:function(e){e.classList.add("is-visible")}})}),e(".fade-in").each(function(a,i){var t=e(this).attr("data-delay");t||(t=0),ScrollReveal().reveal(i,{easing:"ease-out",scale:1,opacity:0,duration:500,viewFactor:.3,delay:t,afterReveal:function(e){e.classList.add("is-visible")}})}),e(".slide-image-children img").each(function(a,i){var t=0;e(i).width()<=e(i).closest(".slide-image-children").width()/2+30&&(t=a%2==0?0:200),ScrollReveal().reveal(i,{opacity:"0",duration:600,viewFactor:.3,delay:t,afterReveal:function(e){TweenMax.to(e,.5,{x:"0%",ease:Power1.easeOut})},beforeReveal:function(e){TweenMax.set(e,{x:"100%"})}})}),e(".slide-image-right").each(function(a,i){var t=e(this).attr("data-delay");t||(t=0),ScrollReveal().reveal(i,{opacity:"0",duration:600,viewFactor:.3,delay:parseInt(t),afterReveal:function(e){TweenMax.to(e,.5,{x:"0%",ease:Power1.easeOut})},beforeReveal:function(e){TweenMax.set(e,{x:"-100%"})}})}),e(".slide-image-left").each(function(a,i){var t=e(this).attr("data-delay");t||(t=0),ScrollReveal().reveal(i,{opacity:"0",duration:600,viewFactor:.3,delay:parseInt(t),afterReveal:function(e){TweenMax.to(e,.5,{x:"0%",ease:Power1.easeOut})},beforeReveal:function(e){TweenMax.set(e,{x:"100%"})}})}),e(".site-content.bg-lines").prepend('<div class="bg-lines__line container"><b></b><b></b><b></b><b></b><b></b></div>'),e(".bg-lines .page-title, .bg-lines .hero, .bg-lines .hero-slide-inner").prepend('<div class="bg-lines__circle"><b></b><b></b><b></b><b></b></div>'),e(window).width()>768){var i=e(window).height()-e("#main-footer").outerHeight()-e("#main-header").outerHeight();i<e(window).height()&&e("#main-content").css("min-height",i)}else e(".brand-list").slick({infinite:!1,slidesToShow:3,slidesToScroll:1,autoplay:!0,arrows:!1,draggable:!0,swipe:!0,dots:!1});e(window).width()<992&&e(".main-menu .sub-menu").each(function(a,i){e(i).prev("a").closest("li").prepend('<span class="js-sub-menu toggle-sub-menu"></span>')}),e(".js-hero-slider").on("init reInit afterChange",function(e,a,i,t){var s=(i||0)+1,o=a.slideCount;s<10&&(s="0"+s),o<10&&(o="0"+o),a.$slider.next(".js-slick-count").text(s+" / "+o)}),e(".js-hero-slider").on("beforeChange",function(a,i,t,s){var o=i.$slides.eq(s).find(".hero-slide-inner").children(),n=1;o.each(function(a,i){e(i).hasClass("bg-lines__circle")||(TweenMax.set(i,{x:"-80px",opacity:0}),setTimeout(function(){TweenMax.to(i,.4,{x:"0",opacity:1,ease:Power1.easeOut})},400+100*n),n++)})}),e(".js-hero-slider").slick({infinite:!0,slidesToShow:1,slidesToScroll:1,pauseOnDotsHover:!0,autoplay:!1,autoplaySpeed:5e3,fade:!0,arrows:!1,draggable:!1,swipe:!1,dots:!0,pauseOnHover:!1,pauseOnFocus:!1,responsive:[{breakpoint:768,settings:{draggable:!0,swipe:!0}}]}),e(".js-offices-carousel").on("init",function(a,i,t){e(".js-offices-dots").appendTo(".js-offices-nav"),e(i.$slides).each(function(a,i){e(".js-offices-nav").append('<li><a href="#0" class="js-to-step" data-slide="'+a+'">'+e(i).find(".js-office-item-title").text()+"</a></li>")}),e(".js-offices-nav li:first-child").addClass("slick-active")}),e(".js-offices-carousel").on("beforeChange",function(a,i,t,s){e(".js-offices-nav .slick-active").removeClass("slick-active"),e(".js-offices-nav li").eq(s).addClass("slick-active")}),e(document).on("click",".js-to-step",function(a){var i=e(this).attr("data-slide");e(".js-offices-carousel").slick("slickGoTo",i)}),e(".js-offices-carousel").slick({infinite:!1,slidesToShow:1,slidesToScroll:1,autoplay:!1,fade:!0,arrows:!1,draggable:!1,swipe:!1,dots:!0,responsive:[{breakpoint:768,settings:{draggable:!0,swipe:!0}}]}),e(".js-gallery a").simpleLightbox(),e(".js-gallery").imagesLoaded().done(function(){var a="masonry";e(window).width()>992&&(a="fitRows"),e(".js-gallery").isotope({layoutMode:a,itemSelector:".grid-item",percentPosition:!0,masonry:{columnWidth:".grid-item"}})})}),e(window).resize(function(){a()});var i=0,t=e(window).width()/4;e(window).scroll(function(a){var s=e(this).scrollTop();s>t?(e("#main-header").hasClass("sticky")?e("#main-header").removeClass("no-animate"):e("#main-header").addClass("no-animate"),e("#main-header").addClass("sticky").css("transform","")):e("#main-header").hasClass("sticky")&&(e("#main-header").css({opacity:0,transform:"translateY(-50%)"}),setTimeout(function(){e("#main-header").removeClass("sticky sticky-down sticky-up").css({opacity:1,transform:"translateY(0)"})},300)),s<i?(e("#main-header.sticky").addClass("sticky-up"),e("#main-header.sticky").removeClass("sticky-down")):(e("#main-header.sticky").removeClass("sticky-up"),e("#main-header.sticky").addClass("sticky-down")),i=s}),e(".header-nav").on("click",function(a){a.preventDefault();var i=a.target;if(e(i).is("#js-open-menu"))a.stopPropagation(),e("#main-header").addClass("mob-menu-active"),e("body").addClass("no-scroll"),e(".page-backdrop").addClass("active"),setTimeout(function(){e("#js-main-menu").addClass("active")},200);else if(e(i).is("#js-close-menu"))a.stopPropagation(),e("#js-main-menu").removeClass("active"),setTimeout(function(){e(".page-backdrop").removeClass("active"),e("body").removeClass("no-scroll")},200),setTimeout(function(){e("#main-header").removeClass("mob-menu-active")},400);else if(e(i).is(".nav-link")){a.stopPropagation();var t=e(i).attr("href");TweenMax.to("#main-header",.2,{y:"-85px",ease:Power1.easeIn}),e("body").hasClass("home")?(TweenMax.to(".hero",.6,{opacity:0,ease:Power1.easeOut,onComplete:function(){window.location.href=t}}),TweenMax.to("#main-footer, section:not(.hero)",.6,{y:"150px",opacity:0,ease:Power1.easeOut})):TweenMax.to("#main-content",.5,{y:"100px",opacity:0,ease:Power1.easeOut,onComplete:function(){window.location.href=t}})}else e(i).is(".js-sub-menu")&&(a.stopPropagation(),e(i).toggleClass("active"),e(i).closest("li").find(".sub-menu").slideToggle())}),e("#js-office-map-modal").on("show.bs.modal",function(a){var i=e(a.relatedTarget).closest(".office-item").find(".js-office-item-title").text(),t=e(a.relatedTarget).closest(".office-item").find(".js-show-on-map-content iframe").clone();e(a.target).find(".modal-body").empty().append(t),e(a.target).find(".modal-title").text(i)}),e(".js-project-filter").on("click",".project-filter__btn",function(a){if(a.preventDefault(),e(".js-project-list .project-item.fade-from-top").removeClass("fade-from-top"),ScrollReveal().clean(".project-item"),!e(this).hasClass("active")){var i=e(this).attr("data-filter");e(this).closest(".js-project-filter").find(".active").removeClass("active"),e(this).addClass("active"),e(".js-project-list").isotope({filter:i})}}),e(".js-contact-form").validate({submitHandler:function(a){!function(a){var i=e("#form_name").val(),t=e("#form_email").val(),s=e("#form_msg").val();e.ajax({type:"POST",url:"inc/mail.php",dataType:"json",data:{form_name:i,form_email:t,form_msg:s},beforeSend:function(){e(a).find(".form-btn").addClass("loading"),e(a).find(".form-error, .form-success").remove()},success:function(i){console.log(i),i.send?e(a).append('<div class="form-success">'+i.message+"</div>"):e(a).append('<div class="form-error">'+i.message+"</div>"),e(a).find(".form-btn").removeClass("loading")},error:function(i,t,s){e(a).find(".form-btn").removeClass("loading"),console.log(i)}})}(a)}})}(jQuery);